.. _chart_gallery.bar:


=========
Bar Chart
=========

.. Necessary Code Elements

.. ipython:: python
    :suppress:

    import verticapy as vp
    data = vp.vDataFrame({
      "gender": ['M', 'M', 'M', 'F', 'F', 'F', 'F'],
      "age": [20, 22, 23, 19, 21, 27, 24],
      "grade": ['A','B','C','A','B','B', 'B'],
      "score": [0.99, 0.71, 0.66, 0.92, 0.79, 0.71, 0.77],
      "salary": [21000, 22000, 10000, 32000, 17000, 23000, 12000],
    })


General
-------

Let's begin by importing `VerticaPy`.

.. ipython:: python

    import verticapy as vp

Let's generate a dataset using the following data.

.. code-block:: python
    
    data = vp.vDataFrame({
      "gender": ['M', 'M', 'M', 'F', 'F', 'F', 'F'],
      "age": [20, 22, 23, 19, 21, 27, 24],
      "grade": ['A','B','C','A','B','B', 'B'],
      "score": [0.99, 0.71, 0.66, 0.92, 0.79, 0.71, 0.77],
      "salary": [21000, 22000, 10000, 32000, 17000, 23000, 12000],
    })

In the context of data visualization, we have the flexibility to harness multiple plotting libraries to craft a wide range of graphical representations. VerticaPy, as a versatile tool, provides support for several graphic libraries, such as Matplotlib, Highcharts, and Plotly. Each of these libraries offers unique features and capabilities, allowing us to choose the most suitable one for our specific data visualization needs.

.. image:: ../../docs/source/_static/plotting_libs.png
   :width: 80%
   :align: center

.. note::
    
    To select the desired plotting library, we simply need to use the `set_option` function. VerticaPy offers the flexibility to smoothly transition between different plotting libraries. In instances where a particular graphic is not supported by the chosen library or is not supported within the VerticaPy framework, the tool will automatically generate a warning and then switch to an alternative library where the graphic can be created.

Please click on the tabs to view the various graphics generated by the different plotting libraries.

.. ipython:: python
    :suppress:

    import verticapy as vp

.. tab:: Plotly

    .. ipython:: python
        :suppress:

        vp.set_option("plotting_lib", "plotly")

    We can switch to using the `plotly` module.

    .. code-block:: python
        
        vp.set_option("plotting_lib", "plotly")

    For Bar charts, there are two orientations:

    .. tab:: Horizontal

        There are multiple options for the type of bar chart:
        
        .. tab:: 1D

          .. tab:: Python

            .. code-block:: python
              
                data["grade"].barh()

          .. tab:: SQL

            We load the VerticaPy `chart` extension.

            .. code-block:: python

                %load_ext verticapy.chart

            We write the SQL query using Jupyter magic cells.

            .. code-block:: sql
                
                %%chart -k barh
                SELECT grade, COUNT(*) FROM :data GROUP BY 1;

          .. ipython:: python
              :suppress:
            
              fig = data["grade"].barh()
              fig.write_html("figures/plotting_plotly_barh_1D.html")

          .. raw:: html
              :file: SPHINX_DIRECTORY/figures/plotting_plotly_barh_1D.html

        .. tab:: 2D

          .. tab:: Python

            .. code-block:: python
              
                data.barh(columns = ["grade", "gender"])

          .. tab:: SQL

            We load the VerticaPy `chart` extension.

            .. code-block:: python

                %load_ext verticapy.chart

            We write the SQL query using Jupyter magic cells.

            .. code-block:: sql
                
                %%chart -k barh
                SELECT grade, gender, COUNT(*) FROM :data GROUP BY 1, 2;

          .. ipython:: python
              :suppress:

              fig = data.barh(columns = ["grade", "gender"])
              fig.write_html("figures/plotting_plotly_barh_2D.html")

          .. raw:: html
              :file: SPHINX_DIRECTORY/figures/plotting_plotly_barh_2D.html

        .. tab:: Stacked

          .. tab:: Python

            .. code-block:: python
              
                data.barh(["grade", "gender"], kind = "stacked")

          .. tab:: SQL

            We load the VerticaPy `chart` extension.

            .. code-block:: python

                %load_ext verticapy.chart

            We write the SQL query using Jupyter magic cells.

            .. code-block:: sql
                
                %%chart -k stacked_barh
                SELECT grade, gender, COUNT(*) FROM :data GROUP BY 1, 2;

          .. ipython:: python
              :suppress:

              fig = data.barh(["grade", "gender"], kind = "stacked")
              fig.write_html("figures/plotting_plotly_barh_stacked.html")

          .. raw:: html
              :file: SPHINX_DIRECTORY/figures/plotting_plotly_barh_stacked.html

        .. tab:: Fully-Stacked

          .. tab:: Python

            .. code-block:: python
              
                data.barh(["grade", "gender"], kind = "fully")

          .. tab:: SQL

            We load the VerticaPy `chart` extension.

            .. code-block:: python

                %load_ext verticapy.chart

            We write the SQL query using Jupyter magic cells.

            .. code-block:: sql
                
                %%chart -k fstacked_barh
                SELECT grade, gender, COUNT(*) FROM :data GROUP BY 1, 2;

          .. ipython:: python
              :suppress:

              fig = data.barh(["grade", "gender"], kind = "fully")
              fig.write_html("figures/plotting_plotly_barh_fully.html")

          .. raw:: html
              :file: SPHINX_DIRECTORY/figures/plotting_plotly_barh_fully.html

        .. tab:: Negative

          .. tab:: Python

            .. code-block:: python
              
                data.barh(["grade", "gender"], kind = "pyramid")

          .. tab:: SQL

            We load the VerticaPy `chart` extension.

            .. code-block:: python

                %load_ext verticapy.chart

            We write the SQL query using Jupyter magic cells.

            .. code-block:: sql
                
                %%chart -k negative_bar
                SELECT grade, gender, COUNT(*) FROM :data GROUP BY 1, 2;

          .. ipython:: python
              :suppress:

              fig = data.barh(["grade", "gender"], kind = "pyramid")
              fig.write_html("figures/plotting_plotly_barh_pyramid.html")

          .. raw:: html
              :file: SPHINX_DIRECTORY/figures/plotting_plotly_barh_pyramid.html

    .. tab:: Vertical

        There are multiple options for the type of bar chart:
        
        .. tab:: 1D

          .. tab:: Python

            .. code-block:: python
              
                data["grade"].bar()

          .. tab:: SQL

            We load the VerticaPy `chart` extension.

            .. code-block:: python

                %load_ext verticapy.chart

            We write the SQL query using Jupyter magic cells.

            .. code-block:: sql
                
                %%chart -k bar
                SELECT grade, COUNT(*) FROM :data GROUP BY 1;

          .. ipython:: python
              :suppress:

              fig = data["grade"].bar()
              fig.write_html("figures/plotting_plotly_bar_1D.html")

          .. raw:: html
              :file: SPHINX_DIRECTORY/figures/plotting_plotly_bar_1D.html

        .. tab:: 2D

          .. tab:: Python

            .. code-block:: python
              
                data.bar(columns = ["grade", "gender"])

          .. tab:: SQL

            We load the VerticaPy `chart` extension.

            .. code-block:: python

                %load_ext verticapy.chart

            We write the SQL query using Jupyter magic cells.

            .. code-block:: sql
                
                %%chart -k bar
                SELECT grade, gender, COUNT(*) FROM :data GROUP BY 1, 2;

          .. ipython:: python
              :suppress:

              fig = data.bar(columns = ["grade", "gender"])
              fig.write_html("figures/plotting_plotly_bar_2D.html")

          .. raw:: html
              :file: SPHINX_DIRECTORY/figures/plotting_plotly_bar_2D.html

        .. tab:: Stacked

          .. tab:: Python

            .. code-block:: python
              
                data.bar(["grade", "gender"], kind = "stacked")

          .. tab:: SQL

            We load the VerticaPy `chart` extension.

            .. code-block:: python

                %load_ext verticapy.chart

            We write the SQL query using Jupyter magic cells.

            .. code-block:: sql
                
                %%chart -k stacked_bar
                SELECT grade, gender, COUNT(*) FROM :data GROUP BY 1, 2;

          .. ipython:: python
              :suppress:

              fig = data.bar(["grade", "gender"], kind = "stacked")
              fig.write_html("figures/plotting_plotly_bar_stacked.html")

          .. raw:: html
              :file: SPHINX_DIRECTORY/figures/plotting_plotly_bar_stacked.html

.. tab:: Highcharts

    .. ipython:: python
        :suppress:

        vp.set_option("plotting_lib", "highcharts")

    We can switch to using the `highcharts` module.

    .. code-block:: python
        
        vp.set_option("plotting_lib", "highcharts")

    For Bar charts, there are two orientations:

    .. tab:: Horizontal

        There are multiple options for the type of bar chart:

        .. tab:: 1D

          .. tab:: Python

            .. code-block:: python
              
                data["grade"].barh()

          .. tab:: SQL

            We load the VerticaPy `chart` extension.

            .. code-block:: python

                %load_ext verticapy.chart

            We write the SQL query using Jupyter magic cells.

            .. code-block:: sql
                
                %%chart -k barh
                SELECT grade, COUNT(*) FROM :data GROUP BY 1;

          .. ipython:: python
              :suppress:

              fig = data["grade"].barh()
              html_text = fig.htmlcontent.replace("container", "plotting_highcharts_barh_1D")
              with open("figures/plotting_highcharts_barh_1D.html", "w") as file:
                file.write(html_text)

          .. raw:: html
              :file: SPHINX_DIRECTORY/figures/plotting_highcharts_barh_1D.html

        .. tab:: 2D

          .. tab:: Python

            .. code-block:: python
              
                data.barh(columns = ["grade", "gender"])

          .. tab:: SQL

            We load the VerticaPy `chart` extension.

            .. code-block:: python

                %load_ext verticapy.chart

            We write the SQL query using Jupyter magic cells.

            .. code-block:: sql
                
                %%chart -k barh
                SELECT grade, gender, COUNT(*) FROM :data GROUP BY 1, 2;

          .. ipython:: python
              :suppress:

              fig = data.barh(columns = ["grade", "gender"])
              html_text = fig.htmlcontent.replace("container", "plotting_highcharts_barh_2D")
              with open("figures/plotting_highcharts_barh_2D.html", "w") as file:
                file.write(html_text)

          .. raw:: html
              :file: SPHINX_DIRECTORY/figures/plotting_highcharts_barh_2D.html

        .. tab:: Drilldown

          .. tab:: Python

            .. code-block:: python
              
                data.barh(["grade", "gender"], kind = "drilldown")

          .. tab:: SQL

            We load the VerticaPy `chart` extension.

            .. code-block:: python

                %load_ext verticapy.chart

            We write the SQL query using Jupyter magic cells.

            .. code-block:: sql
                
                %%chart -k drilldown_barh
                SELECT grade, gender, COUNT(*) FROM :data GROUP BY 1, 2;

          .. ipython:: python
              :suppress:

              fig = data.barh(["grade", "gender"], kind = "drilldown")
              html_text = fig.htmlcontent.replace("container", "plotting_highcharts_barh_drilldown")
              with open("figures/plotting_highcharts_barh_drilldown.html", "w") as file:
                file.write(html_text)

          .. raw:: html
              :file: SPHINX_DIRECTORY/figures/plotting_highcharts_barh_drilldown.html

        .. tab:: Stacked

          .. tab:: Python

            .. code-block:: python
              
                data.barh(["grade", "gender"], kind = "stacked")

          .. tab:: SQL

            We load the VerticaPy `chart` extension.

            .. code-block:: python

                %load_ext verticapy.chart

            We write the SQL query using Jupyter magic cells.

            .. code-block:: sql
                
                %%chart -k stacked_barh
                SELECT grade, gender, COUNT(*) FROM :data GROUP BY 1, 2;

          .. ipython:: python
              :suppress:

              fig = data.barh(["grade", "gender"], kind = "stacked")
              html_text = fig.htmlcontent.replace("container", "plotting_highcharts_barh_stacked")
              with open("figures/plotting_highcharts_barh_stacked.html", "w") as file:
                file.write(html_text)

          .. raw:: html
              :file: SPHINX_DIRECTORY/figures/plotting_highcharts_barh_stacked.html

        .. tab:: Fully-Stacked

          .. tab:: Python

            .. code-block:: python
              
                data.barh(["grade", "gender"], kind = "fully")

          .. tab:: SQL

            We load the VerticaPy `chart` extension.

            .. code-block:: python

                %load_ext verticapy.chart

            We write the SQL query using Jupyter magic cells.

            .. code-block:: sql
                
                %%chart -k fstacked_barh
                SELECT grade, gender, COUNT(*) FROM :data GROUP BY 1, 2;

          .. ipython:: python
              :suppress:

              fig = data.barh(["grade", "gender"], kind = "fully")
              html_text = fig.htmlcontent.replace("container", "plotting_highcharts_barh_fully")
              with open("figures/plotting_highcharts_barh_fully.html", "w") as file:
                file.write(html_text)

          .. raw:: html
              :file: SPHINX_DIRECTORY/figures/plotting_highcharts_barh_fully.html

        .. tab:: Negative

          .. tab:: Python

            .. code-block:: python
              
                data.barh(["grade", "gender"], kind = "pyramid")

          .. tab:: SQL

            We load the VerticaPy `chart` extension.

            .. code-block:: python

                %load_ext verticapy.chart

            We write the SQL query using Jupyter magic cells.

            .. code-block:: sql
                
                %%chart -k negative_bar
                SELECT grade, gender, COUNT(*) FROM :data GROUP BY 1, 2;

          .. ipython:: python
              :suppress:

              fig = data.barh(["grade", "gender"], kind = "pyramid")
              html_text = fig.htmlcontent.replace("container","plotting_highcharts_barh_pyramid")
              with open("figures/plotting_highcharts_barh_pyramid.html", "w") as file:
                file.write(html_text)

          .. raw:: html
              :file: SPHINX_DIRECTORY/figures/plotting_highcharts_barh_pyramid.html

    .. tab:: Vertical

        There are multiple options for the type of bar chart:

        .. tab:: 1D

          .. tab:: Python

            .. code-block:: python
              
                data["grade"].bar()

          .. tab:: SQL

            We load the VerticaPy `chart` extension.

            .. code-block:: python

                %load_ext verticapy.chart

            We write the SQL query using Jupyter magic cells.

            .. code-block:: sql
                
                %%chart -k bar
                SELECT grade, COUNT(*) FROM :data GROUP BY 1;

          .. ipython:: python
              :suppress:

              fig = data["grade"].bar()
              html_text = fig.htmlcontent.replace("container", "plotting_highcharts_bar_1D")
              with open("figures/plotting_highcharts_bar_1D.html", "w") as file:
                file.write(html_text)

          .. raw:: html
              :file: SPHINX_DIRECTORY/figures/plotting_highcharts_bar_1D.html

        .. tab:: 2D

          .. tab:: Python

            .. code-block:: python
              
                data.bar(columns = ["grade", "gender"])

          .. tab:: SQL

            We load the VerticaPy `chart` extension.

            .. code-block:: python

                %load_ext verticapy.chart

            We write the SQL query using Jupyter magic cells.

            .. code-block:: sql
                
                %%chart -k bar
                SELECT grade, gender, COUNT(*) FROM :data GROUP BY 1, 2;

          .. ipython:: python
              :suppress:

              fig = data.bar(columns = ["grade", "gender"])
              html_text = fig.htmlcontent.replace("container", "plotting_highcharts_bar_2D")
              with open("figures/plotting_highcharts_bar_2D.html", "w") as file:
                file.write(html_text)

          .. raw:: html
              :file: SPHINX_DIRECTORY/figures/plotting_highcharts_bar_2D.html

        .. tab:: Drilldown

          .. tab:: Python

            .. code-block:: python
              
                data.bar(["grade", "gender"], kind = "drilldown")

          .. tab:: SQL

            We load the VerticaPy `chart` extension.

            .. code-block:: python

                %load_ext verticapy.chart

            We write the SQL query using Jupyter magic cells.

            .. code-block:: sql
                
                %%chart -k drilldown_bar
                SELECT grade, gender, COUNT(*) FROM :data GROUP BY 1, 2;

          .. ipython:: python
              :suppress:

              fig = data.bar(["grade", "gender"], kind = "drilldown")
              html_text = fig.htmlcontent.replace("container", "plotting_highcharts_bar_drilldown")
              with open("figures/plotting_highcharts_bar_drilldown.html", "w") as file:
                file.write(html_text)

          .. raw:: html
              :file: SPHINX_DIRECTORY/figures/plotting_highcharts_bar_drilldown.html

        .. tab:: Stacked

          .. tab:: Python

            .. code-block:: python
              
                data.bar(["grade", "gender"], kind = "stacked")

          .. tab:: SQL

            We load the VerticaPy `chart` extension.

            .. code-block:: python

                %load_ext verticapy.chart

            We write the SQL query using Jupyter magic cells.

            .. code-block:: sql
                
                %%chart -k stacked_bar
                SELECT grade, gender, COUNT(*) FROM :data GROUP BY 1, 2;

          .. ipython:: python
              :suppress:

              fig = data.bar(["grade", "gender"], kind = "stacked")
              html_text = fig.htmlcontent.replace("container", "plotting_highcharts_bar_stacked")
              with open("figures/plotting_highcharts_bar_stacked.html", "w") as file:
                file.write(html_text)

          .. raw:: html
              :file: SPHINX_DIRECTORY/figures/plotting_highcharts_bar_stacked.html
            
.. tab:: Matplotlib

    .. ipython:: python
        :suppress:

        vp.set_option("plotting_lib", "matplotlib")

    We can switch to using the `matplotlib` module.

    .. code-block:: python
        
        vp.set_option("plotting_lib", "matplotlib")

    For Bar charts, there are two orientations:

    .. tab:: Horizontal

        There are multiple options for the type of bar chart:

        .. tab:: 1D

          .. tab:: Python

            .. ipython:: python
              :okwarning:

              @savefig plotting_matplotlib_barh_1D.png
              data["grade"].barh()

          .. tab:: SQL

            We load the VerticaPy `chart` extension.

            .. code-block:: python

                %load_ext verticapy.chart

            We write the SQL query using Jupyter magic cells.

            .. code-block:: sql
                
                %%chart -k barh
                SELECT grade, COUNT(*) FROM :data GROUP BY 1;

            .. image:: ../../docs/source/savefig/plotting_matplotlib_barh_1D.png
                :width: 100%
                :align: center

        .. tab:: 2D

          .. tab:: Python

            .. ipython:: python
              :okwarning:

              @savefig plotting_matplotlib_barh_2D.png
              data.barh(columns = ["grade", "gender"])

          .. tab:: SQL

            We load the VerticaPy `chart` extension.

            .. code-block:: python

                %load_ext verticapy.chart

            We write the SQL query using Jupyter magic cells.

            .. code-block:: sql
                
                %%chart -k barh
                SELECT grade, gender, COUNT(*) FROM :data GROUP BY 1, 2;

            .. image:: ../../docs/source/savefig/plotting_matplotlib_barh_2D.png
                :width: 100%
                :align: center

        .. tab:: Stacked

          .. tab:: Python

            .. ipython:: python
              :okwarning:

              @savefig plotting_matplotlib_barh_stacked.png
              data.barh(["grade", "gender"], kind = "stacked")

          .. tab:: SQL

            We load the VerticaPy `chart` extension.

            .. code-block:: python

                %load_ext verticapy.chart

            We write the SQL query using Jupyter magic cells.

            .. code-block:: sql
                
                %%chart -k stacked_barh
                SELECT grade, gender, COUNT(*) FROM :data GROUP BY 1, 2;

            .. image:: ../../docs/source/savefig/plotting_matplotlib_barh_stacked.png
                :width: 100%
                :align: center
              
        .. tab:: Fully-Stacked

          .. tab:: Python

            .. ipython:: python
              :okwarning:

              @savefig plotting_matplotlib_barh_fully.png
              data.barh(["grade", "gender"], kind = "fully")

          .. tab:: SQL

            We load the VerticaPy `chart` extension.

            .. code-block:: python

                %load_ext verticapy.chart

            We write the SQL query using Jupyter magic cells.

            .. code-block:: sql
                
                %%chart -k fstacked_barh
                SELECT grade, gender, COUNT(*) FROM :data GROUP BY 1, 2;

            .. image:: ../../docs/source/savefig/plotting_matplotlib_barh_fully.png
                :width: 100%
                :align: center

        .. tab:: Negative

          .. tab:: Python

            .. ipython:: python
              :okwarning:

              @savefig plotting_matplotlib_barh_pyramid.png
              data.barh(["grade", "gender"], kind = "pyramid")

          .. tab:: SQL

            We load the VerticaPy `chart` extension.

            .. code-block:: python

                %load_ext verticapy.chart

            We write the SQL query using Jupyter magic cells.

            .. code-block:: sql
                
                %%chart -k negative_bar
                SELECT grade, gender, COUNT(*) FROM :data GROUP BY 1, 2;

            .. image:: ../../docs/source/savefig/plotting_matplotlib_barh_pyramid.png
                :width: 100%
                :align: center

    .. tab:: Vertical

        There are multiple options for the type of bar chart:

        .. tab:: 1D

          .. tab:: Python

            .. ipython:: python
              :okwarning:

              @savefig plotting_matplotlib_bar_1D.png
              data["grade"].bar()

          .. tab:: SQL

            We load the VerticaPy `chart` extension.

            .. code-block:: python

                %load_ext verticapy.chart

            We write the SQL query using Jupyter magic cells.

            .. code-block:: sql
                
                %%chart -k bar
                SELECT grade, COUNT(*) FROM :data GROUP BY 1;

            .. image:: ../../docs/source/savefig/plotting_matplotlib_bar_1D.png
                :width: 100%
                :align: center

        .. tab:: 2D

          .. tab:: Python

            .. ipython:: python
              :okwarning:

              @savefig plotting_matplotlib_bar_2D.png
              data.barh(columns = ["grade", "gender"])

          .. tab:: SQL

            We load the VerticaPy `chart` extension.

            .. code-block:: python

                %load_ext verticapy.chart

            We write the SQL query using Jupyter magic cells.

            .. code-block:: sql
                
                %%chart -k bar
                SELECT grade, gender, COUNT(*) FROM :data GROUP BY 1, 2;

            .. image:: ../../docs/source/savefig/plotting_matplotlib_bar_2D.png
                :width: 100%
                :align: center

        .. tab:: Stacked

          .. tab:: Python

            .. ipython:: python
              :okwarning:

              @savefig plotting_matplotlib_bar_stacked.png
              data.bar(["grade", "gender"], kind = "stacked")

          .. tab:: SQL

            We load the VerticaPy `chart` extension.

            .. code-block:: python

                %load_ext verticapy.chart

            We write the SQL query using Jupyter magic cells.

            .. code-block:: sql
                
                %%chart -k stacked_bar
                SELECT grade, gender, COUNT(*) FROM :data GROUP BY 1, 2;

            .. image:: ../../docs/source/savefig/plotting_matplotlib_bar_stacked.png
                :width: 100%
                :align: center

___________________

Custom Aggregations
-------------------

Within the VerticaPy framework, you have the flexibility to apply a wide array of aggregation techniques according to your specific analytical needs. This extends to the option of utilizing SQL statements, allowing you to craft custom aggregations that precisely match your data summarization requirements. VerticaPy empowers you with the versatility to aggregate data in the manner that best serves your analytical objectives.

.. note::

    In SQL, aggregations can be computed directly within the input SQL statement, but in Python, the process is a bit different.

.. tab:: Plotly

    .. ipython:: python
        :suppress:

        vp.set_option("plotting_lib","plotly")

    **General Options**

    .. code-block:: python
        
        data["grade"].bar(method = "mean", of = "score")

    .. ipython:: python
        :suppress:

        fig = data["grade"].bar(method = "mean", of = "score")
        fig.write_html("figures/plotting_plotly_bar_custom_agg_1.html")

    .. raw:: html
        :file: SPHINX_DIRECTORY/figures/plotting_plotly_bar_custom_agg_1.html

    .. note:: VerticaPy simplifies the usage of aggregations, such as percentiles. You only need to specify the percentile number without a decimal point to compute it. For instance, 50% for the median, 75% for the third quartile, and 99% for the last percentile.

    **Direct SQL statement**

    .. note:: You are free to utilize any SQL statement as long as it is compatible with the supported features of VerticaPy.

    .. code-block:: python
        
        data["grade"].bar(method = "MIN(score) AS min_score")

    .. ipython:: python
        :suppress:

        fig = data["grade"].bar(method = "MIN(score) AS min_score")
        fig.write_html("figures/plotting_plotly_bar_custom_agg_2.html")

    .. raw:: html
        :file: SPHINX_DIRECTORY/figures/plotting_plotly_bar_custom_agg_2.html

.. tab:: Highcharts

    .. ipython:: python
        :suppress:

        vp.set_option("plotting_lib", "highcharts")

    **General Options**

    .. code-block:: python
              
        data["grade"].bar(method = "mean", of = "score")

    .. ipython:: python
        :suppress:

        fig = data["grade"].bar(method = "mean", of = "score")
        html_text = fig.htmlcontent.replace("container", "plotting_highcharts_bar_custom_agg_1")
        with open("figures/plotting_highcharts_bar_custom_agg_1.html", "w") as file:
          file.write(html_text)

    .. raw:: html
        :file: SPHINX_DIRECTORY/figures/plotting_highcharts_bar_custom_agg_1.html

    .. note:: VerticaPy simplifies the usage of aggregations, such as percentiles. You only need to specify the percentile number without a decimal point to compute it. For instance, 50% for the median, 75% for the third quartile, and 99% for the last percentile.

    **Direct SQL statement**

    .. note:: You are free to utilize any SQL statement as long as it is compatible with the supported features of VerticaPy.

    .. code-block:: python
              
        data["grade"].bar(method = "MIN(score) AS min_score")

    .. ipython:: python
        :suppress:

        fig = data["grade"].bar(method = "MIN(score) AS min_score")
        html_text = fig.htmlcontent.replace("container", "plotting_highcharts_bar_custom_agg_2")
        with open("figures/plotting_highcharts_bar_custom_agg_2.html", "w") as file:
          file.write(html_text)

    .. raw:: html
        :file: SPHINX_DIRECTORY/figures/plotting_highcharts_bar_custom_agg_2.html

.. tab:: Matplolib

    .. ipython:: python
        :suppress:

        vp.set_option("plotting_lib", "matplotlib")

    **General Options**

    .. ipython:: python

        @savefig plotting_matplotlib_bar_custom_agg_1.png
        data["grade"].bar(method = "mean", of = "score")

    .. note:: VerticaPy simplifies the usage of aggregations, such as percentiles. You only need to specify the percentile number without a decimal point to compute it. For instance, 50% for the median, 75% for the third quartile, and 99% for the last percentile.

    **Direct SQL statement**

    .. note:: You are free to utilize any SQL statement as long as it is compatible with the supported features of VerticaPy.

    .. ipython:: python

        @savefig plotting_matplotlib_bar_custom_agg_2.png
        data["grade"].bar(method = "MIN(score) AS min_score")

___________________

Chart Customization
-------------------

VerticaPy empowers users with a high degree of flexibility when it comes to tailoring the visual aspects of their plots. This customization extends to essential elements such as **color schemes**, **text labels**, and **plot sizes**, as well as a wide range of other attributes that can be fine-tuned to align with specific design preferences and analytical requirements. Whether you want to make your visualizations more visually appealing or need to convey specific insights with precision, VerticaPy's customization options enable you to craft graphics that suit your exact needs.

.. hint::

    For SQL users who use Jupyter Magic cells, chart customization must be done in Python. They can then export the graphic using the last magic cell result.

    .. code-block:: python

        chart = _

    Now, the chart variable includes the graphic. Depending on the library you are using, you will obtain a different object.

.. Important:: Different customization parameters are available for Plotly, Highcharts, and Matplotlib. For a comprehensive list of customization features, please consult the documentation of the respective libraries: `plotly <https://plotly.com/python-api-reference/>`_, `matplotlib <https://matplotlib.org/stable/api/matplotlib_configuration_api.html>`_ and `highcharts <https://api.highcharts.com/highcharts/>`_.

Colors
~~~~~~

.. tab:: Plotly

    .. ipython:: python
        :suppress:

        vp.set_option("plotting_lib", "plotly")

    **Custom colors for 1D**

    .. code-block:: python
        
        fig = data["gender"].bar()
        fig.update_traces(marker = dict(color="red"))

    .. ipython:: python
        :suppress:

        fig = data["gender"].bar()
        fig.update_traces(marker = dict(color = "red"))
        fig.write_html("figures/plotting_plotly_bar_custom_color_1.html")

    .. raw:: html
        :file: SPHINX_DIRECTORY/figures/plotting_plotly_bar_custom_color_1.html

    **Custom colors mapping for categories**

    .. note:: You can leverage all the capabilities of the Plotly object, including functions like `update_trace`.

    .. code-block:: python
        
        fig = data.bar(columns = ["grade", "gender"])
        color_mapping = {
            "F": "green",
            "M": "pink",
        }
        for trace_index, trace in enumerate(fig.data):
            if trace.name in color_mapping:
                new_color = color_mapping[trace.name]
                fig.data[trace_index].marker.color = new_color

    .. ipython:: python
        :suppress:

        fig = data.bar(columns = ["grade", "gender"])
        color_mapping = {
            "F": "green",
            "M": "pink",
        }
        for trace_index, trace in enumerate(fig.data):
            if trace.name in color_mapping:
                new_color = color_mapping[trace.name]
                fig.data[trace_index].marker.color = new_color                                          
        fig.write_html("figures/plotting_plotly_bar_custom_color_2.html")

    .. raw:: html
        :file: SPHINX_DIRECTORY/figures/plotting_plotly_bar_custom_color_2.html

.. tab:: Highcharts

    .. ipython:: python
        :suppress:

        vp.set_option("plotting_lib", "highcharts")

    **Custom colors for 1D**

    .. code-block:: python
        
        data["grade"].bar(colors = ["green"])

    .. ipython:: python
        :suppress:

        fig = data["grade"].bar(colors = ["green"])
        html_text = fig.htmlcontent.replace("container", "plotting_highcharts_bar_custom_color_1")
        with open("figures/plotting_highcharts_bar_custom_color_1.html", "w") as file:
            file.write(html_text)


    .. raw:: html
        :file: SPHINX_DIRECTORY/figures/plotting_highcharts_bar_custom_color_1.html

    **Custom colors mapping for categories**

    .. code-block:: python
        
        data.barh(columns = ["grade", "gender"], colors = ["red", "orange", "green"])

    .. ipython:: python
        :suppress:

        fig = data.barh(columns = ["grade", "gender"], colors = ["red", "orange", "green"])
        html_text = fig.htmlcontent.replace("container", "plotting_highcharts_bar_custom_color_2")
        with open("figures/plotting_highcharts_bar_custom_color_2.html", "w") as file:
            file.write(html_text)

    .. raw:: html
        :file: SPHINX_DIRECTORY/figures/plotting_highcharts_bar_custom_color_2.html

.. tab:: Matplolib

    .. ipython:: python
        :suppress:

        vp.set_option("plotting_lib", "matplotlib")

    **Custom colors for 1D**

    .. ipython:: python
        :okwarning:

        @savefig plotting_matplotlib_bar_custom_color_1.png
        data["grade"].barh(color = ["red"])

    **Custom colors mapping for categories**

    .. ipython:: python
        :okwarning:

        @savefig plotting_matplotlib_bar_custom_color_2.png
        data.barh(columns = ["grade", "gender"], color = ["red", "orange", "green"])

____

Size
~~~~

.. tab:: Plotly

    .. ipython:: python
        :suppress:

        vp.set_option("plotting_lib", "plotly")

    Custom Width and Height.

    .. code-block:: python
        
        data.bar(columns = ["grade", "gender"], width = 300, height = 300)

    .. ipython:: python
        :suppress:

        fig = data.bar(columns = ["grade", "gender"], width = 300, height = 300)
        fig.write_html("figures/plotting_plotly_bar_custom_size.html")

    .. raw:: html
        :file: SPHINX_DIRECTORY/figures/plotting_plotly_bar_custom_size.html

.. tab:: Highcharts

    .. ipython:: python
        :suppress:

        vp.set_option("plotting_lib", "highcharts")

    .. code-block:: python
        
        data["grade"].barh(width = 500, height = 200)

    .. ipython:: python
        :suppress:

        fig = data["grade"].barh(width = 500, height = 200)
        html_text = fig.htmlcontent.replace("container", "plotting_highcharts_bar_custom_size")
        with open("figures/plotting_highcharts_bar_custom_size.html", "w") as file:
            file.write(html_text)

    .. raw:: html
        :file: SPHINX_DIRECTORY/figures/plotting_highcharts_bar_custom_size.html

.. tab:: Matplolib

    .. ipython:: python
        :suppress:

        vp.set_option("plotting_lib", "matplotlib")

    .. ipython:: python

        @savefig plotting_matplotlib_barh_1D_custom_size.png
        data["grade"].barh(width = 6, height = 3)

_______

Bar Gap
~~~~~~~

.. tab:: Plotly

    .. ipython:: python
        :suppress:

        vp.set_option("plotting_lib", "plotly")

    Custom Width and Height.

    .. code-block:: python
        
        data["grade"].bar(bargap = 0.4)

    .. ipython:: python
        :suppress:

        fig = data["grade"].bar(bargap = 0.4)
        fig.write_html("figures/plotting_plotly_bar_1D_custom_bargap.html")

    .. raw:: html
        :file: SPHINX_DIRECTORY/figures/plotting_plotly_bar_1D_custom_bargap.html

.. tab:: Highcharts

    .. ipython:: python
        :suppress:

        vp.set_option("plotting_lib", "highcharts")

    .. code-block:: python
        
        data["grade"].bar(bargap = 0.4)

    .. ipython:: python
        :suppress:

        fig = data["grade"].bar(bargap = 0.4)
        html_text = fig.htmlcontent.replace("container", "plotting_highcharts_bar_1D_custom_bargap")
        with open("figures/plotting_highcharts_bar_1D_custom_bargap.html", "w") as file:
            file.write(html_text)

    .. raw:: html
        :file: SPHINX_DIRECTORY/figures/plotting_highcharts_bar_1D_custom_bargap.html

.. tab:: Matplolib

    .. ipython:: python
        :suppress:

        vp.set_option("plotting_lib", "matplotlib")

    .. ipython:: python
        :okwarning:

        @savefig plotting_matplotlib_bar_1D_custom_bargap.png
        data["grade"].bar(bargap = 0.4)

_____


Text
~~~~

.. tab:: Plotly

    .. ipython:: python
        :suppress:

        vp.set_option("plotting_lib", "plotly")

    **Custom Title**

    .. code-block:: python
        
        data["grade"].barh().update_layout(title_text = "Custom Title")

    .. ipython:: python
        :suppress:

        fig = data["grade"].barh().update_layout(title_text = "Custom Title")
        fig.write_html("figures/plotting_plotly_bar_custom_main_title.html")

    .. raw:: html
        :file: SPHINX_DIRECTORY/figures/plotting_plotly_bar_custom_main_title.html

    **Custom Legend Title Text**

    .. code-block:: python
        
        data.bar(columns = ["grade", "gender"], legend_title_text = "Custom Legend")

    .. ipython:: python
        :suppress:

        fig = data.bar(columns = ["grade", "gender"], legend_title_text = "Custom Legend")
        fig.write_html("figures/plotting_plotly_bar_custom_title.html")

    .. raw:: html
        :file: SPHINX_DIRECTORY/figures/plotting_plotly_bar_custom_title.html

    **Custom Axis Titles**

    .. code-block:: python
        
        data.bar(columns = ["grade", "gender"], yaxis_title = "Custom Y-Axis Title")

    .. ipython:: python
        :suppress:

        fig = data.bar(columns = ["grade", "gender"], yaxis_title = "Custom Y-Axis Title")
        fig.write_html("figures/plotting_plotly_bar_custom_y_title.html")

    .. raw:: html
        :file: SPHINX_DIRECTORY/figures/plotting_plotly_bar_custom_y_title.html

.. tab:: Highcharts

    .. ipython:: python
        :suppress:

        vp.set_option("plotting_lib", "highcharts")

    **Custom Title Text**

    .. code-block:: python
        
        data["grade"].barh(title = {"text": "Custom Title"})

    .. ipython:: python
        :suppress:

        fig = data["grade"].barh(title = {"text": "Custom Title"})
        html_text = fig.htmlcontent.replace("container", "plotting_highcharts_bar_custom_text_title")
        with open("figures/plotting_highcharts_bar_custom_text_title.html", "w") as file:
            file.write(html_text)

    .. raw:: html
        :file: SPHINX_DIRECTORY/figures/plotting_highcharts_bar_custom_text_title.html

    **Custom Axis Titles**

    .. code-block:: python
        
        data["grade"].barh(xAxis = {"title": {"text": "Custom X-Axis Title"}})

    .. ipython:: python
        :suppress:

        fig = data["grade"].barh(xAxis = {"title": {"text": "Custom X-Axis Title"}})
        html_text = fig.htmlcontent.replace("container","plotting_highcharts_bar_custom_text_xtitle")
        with open("figures/plotting_highcharts_bar_custom_text_xtitle.html", "w") as file:
            file.write(html_text)

    .. raw:: html
        :file: SPHINX_DIRECTORY/figures/plotting_highcharts_bar_custom_text_xtitle.html

.. tab:: Matplolib

    .. ipython:: python
        :suppress:

        vp.set_option("plotting_lib", "matplotlib")

    **Custom Title Text**

    .. ipython:: python
        :okwarning:

        @savefig plotting_matplotlib_barh_1D_custom_title_label.png
        data["grade"].barh().set_title("Custom Title")

    **Custom Axis Titles**

    .. ipython:: python
        :okwarning:

        @savefig plotting_matplotlib_barh_1D_custom_yaxis_label.png
        data["grade"].barh().set_ylabel("Custom Y Axis")

_____